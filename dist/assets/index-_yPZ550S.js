var N=Object.defineProperty;var w=r=>{throw TypeError(r)};var b=(r,e,t)=>e in r?N(r,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[e]=t;var E=(r,e,t)=>b(r,typeof e!="symbol"?e+"":e,t),A=(r,e,t)=>e.has(r)||w("Cannot "+t);var n=(r,e,t)=>(A(r,e,"read from private field"),t?t.call(r):e.get(r)),u=(r,e,t)=>e.has(r)?w("Cannot add the same private member more than once"):e instanceof WeakSet?e.add(r):e.set(r,t),m=(r,e,t,i)=>(A(r,e,"write to private field"),i?i.call(r,t):e.set(r,t),t);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const f of a.addedNodes)f.tagName==="LINK"&&f.rel==="modulepreload"&&i(f)}).observe(document,{childList:!0,subtree:!0});function t(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=t(s);fetch(s.href,a)}})();var o;(function(r){r.LOAD="LOAD",r.EXEC="EXEC",r.FFPROBE="FFPROBE",r.WRITE_FILE="WRITE_FILE",r.READ_FILE="READ_FILE",r.DELETE_FILE="DELETE_FILE",r.RENAME="RENAME",r.CREATE_DIR="CREATE_DIR",r.LIST_DIR="LIST_DIR",r.DELETE_DIR="DELETE_DIR",r.ERROR="ERROR",r.DOWNLOAD="DOWNLOAD",r.PROGRESS="PROGRESS",r.LOG="LOG",r.MOUNT="MOUNT",r.UNMOUNT="UNMOUNT"})(o||(o={}));const g=(()=>{let r=0;return()=>r++})(),y=new Error("ffmpeg is not loaded, call `await ffmpeg.load()` first"),S=new Error("called FFmpeg.terminate()");var c,R,l,h,O,I,d;class U{constructor(){u(this,c,null);u(this,R,{});u(this,l,{});u(this,h,[]);u(this,O,[]);E(this,"loaded",!1);u(this,I,()=>{n(this,c)&&(n(this,c).onmessage=({data:{id:e,type:t,data:i}})=>{switch(t){case o.LOAD:this.loaded=!0,n(this,R)[e](i);break;case o.MOUNT:case o.UNMOUNT:case o.EXEC:case o.FFPROBE:case o.WRITE_FILE:case o.READ_FILE:case o.DELETE_FILE:case o.RENAME:case o.CREATE_DIR:case o.LIST_DIR:case o.DELETE_DIR:n(this,R)[e](i);break;case o.LOG:n(this,h).forEach(s=>s(i));break;case o.PROGRESS:n(this,O).forEach(s=>s(i));break;case o.ERROR:n(this,l)[e](i);break}delete n(this,R)[e],delete n(this,l)[e]})});u(this,d,({type:e,data:t},i=[],s)=>n(this,c)?new Promise((a,f)=>{const D=g();n(this,c)&&n(this,c).postMessage({id:D,type:e,data:t},i),n(this,R)[D]=a,n(this,l)[D]=f,s==null||s.addEventListener("abort",()=>{f(new DOMException(`Message # ${D} was aborted`,"AbortError"))},{once:!0})}):Promise.reject(y));E(this,"load",({classWorkerURL:e,...t}={},{signal:i}={})=>(n(this,c)||(m(this,c,e?new Worker(new URL(e,import.meta.url),{type:"module"}):new Worker(new URL("/assets/worker-BAOIWoxA.js",import.meta.url),{type:"module"})),n(this,I).call(this)),n(this,d).call(this,{type:o.LOAD,data:t},void 0,i)));E(this,"exec",(e,t=-1,{signal:i}={})=>n(this,d).call(this,{type:o.EXEC,data:{args:e,timeout:t}},void 0,i));E(this,"ffprobe",(e,t=-1,{signal:i}={})=>n(this,d).call(this,{type:o.FFPROBE,data:{args:e,timeout:t}},void 0,i));E(this,"terminate",()=>{const e=Object.keys(n(this,l));for(const t of e)n(this,l)[t](S),delete n(this,l)[t],delete n(this,R)[t];n(this,c)&&(n(this,c).terminate(),m(this,c,null),this.loaded=!1)});E(this,"writeFile",(e,t,{signal:i}={})=>{const s=[];return t instanceof Uint8Array&&s.push(t.buffer),n(this,d).call(this,{type:o.WRITE_FILE,data:{path:e,data:t}},s,i)});E(this,"mount",(e,t,i)=>{const s=[];return n(this,d).call(this,{type:o.MOUNT,data:{fsType:e,options:t,mountPoint:i}},s)});E(this,"unmount",e=>{const t=[];return n(this,d).call(this,{type:o.UNMOUNT,data:{mountPoint:e}},t)});E(this,"readFile",(e,t="binary",{signal:i}={})=>n(this,d).call(this,{type:o.READ_FILE,data:{path:e,encoding:t}},void 0,i));E(this,"deleteFile",(e,{signal:t}={})=>n(this,d).call(this,{type:o.DELETE_FILE,data:{path:e}},void 0,t));E(this,"rename",(e,t,{signal:i}={})=>n(this,d).call(this,{type:o.RENAME,data:{oldPath:e,newPath:t}},void 0,i));E(this,"createDir",(e,{signal:t}={})=>n(this,d).call(this,{type:o.CREATE_DIR,data:{path:e}},void 0,t));E(this,"listDir",(e,{signal:t}={})=>n(this,d).call(this,{type:o.LIST_DIR,data:{path:e}},void 0,t));E(this,"deleteDir",(e,{signal:t}={})=>n(this,d).call(this,{type:o.DELETE_DIR,data:{path:e}},void 0,t))}on(e,t){e==="log"?n(this,h).push(t):e==="progress"&&n(this,O).push(t)}off(e,t){e==="log"?m(this,h,n(this,h).filter(i=>i!==t)):e==="progress"&&m(this,O,n(this,O).filter(i=>i!==t))}}c=new WeakMap,R=new WeakMap,l=new WeakMap,h=new WeakMap,O=new WeakMap,I=new WeakMap,d=new WeakMap;var _;(function(r){r.MEMFS="MEMFS",r.NODEFS="NODEFS",r.NODERAWFS="NODERAWFS",r.IDBFS="IDBFS",r.WORKERFS="WORKERFS",r.PROXYFS="PROXYFS"})(_||(_={}));const L=new U({log:!0,corePath:"/node_modules/@ffmpeg/core/dist/ffmpeg-core.js"}),p=document.getElementById("status"),P=async()=>{p.textContent="Loading FFmpeg...",await L.load(),p.textContent="Ready!"};P();document.getElementById("convertBtn").addEventListener("click",async()=>{const r=document.getElementById("uploader"),e=document.querySelector(".download-link");if(e.href="",e.textContent="",r.files.length===0){alert("Please select a file.");return}const t=r.files[0];if(!t.type.startsWith("audio/")){alert("Please upload a valid audio file!"),r.value="";return}p.textContent="Converting...";const s=await(await fetch(URL.createObjectURL(t))).arrayBuffer();await L.writeFile(t.name,new Uint8Array(s)),await L.exec(["-i",t.name,"-b:a","8k","output.mp3"]);const a=await L.readFile("output.mp3"),f=URL.createObjectURL(new Blob([a.buffer],{type:"audio/mpeg"}));e.href=f,e.download="output.mp3",e.textContent="Download converted file",p.textContent="Done!"});
